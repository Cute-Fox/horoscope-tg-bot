import telebot
import random
import config

bot = telebot.TeleBot(config.api_token)

# –¢–∏–ø–æ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥–æ—Ä–æ—Å–∫–æ–ø–∞, —Ü–≤–µ—Ç–∞ –∏ —Å–æ–≤–µ—Ç—ã
horoscopes = {
    '–û–≤–µ–Ω': '–°–µ–≥–æ–¥–Ω—è –æ—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å –¥–ª—è –Ω–æ–≤—ã—Ö –Ω–∞—á–∏–Ω–∞–Ω–∏–π!',
    '–¢–µ–ª–µ—Ü': '–ë—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã —Å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ —Ä–µ—à–µ–Ω–∏—è–º–∏.',
    '–ë–ª–∏–∑–Ω–µ—Ü—ã': '–°–µ–≥–æ–¥–Ω—è –≤–∞–º –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –º–Ω–æ–≥–æ –æ–±—â–∞—Ç—å—Å—è, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç —à–∞–Ω—Å.',
    '–†–∞–∫': '–≠–º–æ—Ü–∏–∏ –±—É–¥—É—Ç —Å–∏–ª—å–Ω—ã–º–∏, –ø–æ—Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ.',
    '–õ–µ–≤': '–í—Ä–µ–º—è –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ —è—Ä–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π.',
    '–î–µ–≤–∞': '–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –º–µ–ª–∫–∏–µ –¥–µ—Ç–∞–ª–∏, –æ–Ω–∏ –±—É–¥—É—Ç –≤–∞–∂–Ω—ã.',
    '–í–µ—Å—ã': '–°–µ–≥–æ–¥–Ω—è —Ö–æ—Ä–æ—à –¥–µ–Ω—å –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –≥–∞—Ä–º–æ–Ω–∏–∏ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö.',
    '–°–∫–æ—Ä–ø–∏–æ–Ω': '–ù–µ –±–æ–π—Ç–µ—Å—å –±—ã—Ç—å —Å–æ–±–æ–π, –≤–∞—à —Å—Ç–∏–ª—å –ø—Ä–∏–Ω–µ—Å–µ—Ç —É—Å–ø–µ—Ö.',
    '–°—Ç—Ä–µ–ª–µ—Ü': '–ü–æ—Å—Ç–∞—Ä–∞–π—Ç–µ—Å—å –Ω–µ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø–æ—Å–ø–µ—à–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π.',
    '–ö–æ–∑–µ—Ä–æ–≥': '–§–æ–∫—É—Å –Ω–∞ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö —Ü–µ–ª—è—Ö –ø—Ä–∏–Ω–µ—Å–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.',
    '–í–æ–¥–æ–ª–µ–π': '–î–µ–Ω—å –±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–µ–Ω –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.',
    '–†—ã–±—ã': '–î–µ–Ω—å –æ–±–µ—â–∞–µ—Ç –±—ã—Ç—å —Å–ø–æ–∫–æ–π–Ω—ã–º –∏ –≥–∞—Ä–º–æ–Ω–∏—á–Ω—ã–º.'
}

colors = {
    '–û–≤–µ–Ω': ['–∫—Ä–∞—Å–Ω—ã–π', '–æ—Ä–∞–Ω–∂–µ–≤—ã–π'],
    '–¢–µ–ª–µ—Ü': ['–∑–µ–ª–µ–Ω—ã–π', '–∫–æ—Ä–∏—á–Ω–µ–≤—ã–π'],
    '–ë–ª–∏–∑–Ω–µ—Ü—ã': ['–∂—ë–ª—Ç—ã–π', '—Å–∏–Ω–∏–π'],
    '–†–∞–∫': ['–±–µ–ª—ã–π', '—Å–µ—Ä—ã–π'],
    '–õ–µ–≤': ['–∑–æ–ª–æ—Ç–æ–π', '–∂–µ–ª—Ç—ã–π'],
    '–î–µ–≤–∞': ['—Å–µ—Ä—ã–π', '–∑–µ–ª—ë–Ω—ã–π'],
    '–í–µ—Å—ã': ['–ø–∞—Å—Ç–µ–ª—å–Ω—ã–µ –æ—Ç—Ç–µ–Ω–∫–∏'],
    '–°–∫–æ—Ä–ø–∏–æ–Ω': ['—Ç–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π', '—á–µ—Ä–Ω—ã–π'],
    '–°—Ç—Ä–µ–ª–µ—Ü': ['—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π', '—Å–∏–Ω–∏–π'],
    '–ö–æ–∑–µ—Ä–æ–≥': ['—Ç–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π', '—Å–∏–Ω–∏–π'],
    '–í–æ–¥–æ–ª–µ–π': ['–≥–æ–ª—É–±–æ–π', '–º—è—Ç–Ω—ã–π'],
    '–†—ã–±—ã': ['—Å–≤–µ—Ç–ª–æ-–≥–æ–ª—É–±–æ–π', '–ª–∞–≤–∞–Ω–¥–æ–≤—ã–π']
}

advices = {
    '–û–≤–µ–Ω': '–°–µ–≥–æ–¥–Ω—è –Ω–µ –±–æ–π—Ç–µ—Å—å –∏–¥—Ç–∏ –Ω–∞ —Ä–∏—Å–∫.',
    '–¢–µ–ª–µ—Ü': '–°–ª—É—à–∞–π—Ç–µ —Å–≤–æ—é –∏–Ω—Ç—É–∏—Ü–∏—é.',
    '–ë–ª–∏–∑–Ω–µ—Ü—ã': '–ù–µ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ –Ω–∞ –∑–∞–≤—Ç—Ä–∞ —Ç–æ, —á—Ç–æ –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è.',
    '–†–∞–∫': '–ë—É–¥—å—Ç–µ —Ç–µ—Ä–ø–∏–º–µ–µ –∫ –¥—Ä—É–≥–∏–º.',
    '–õ–µ–≤': '–°–¥–µ–ª–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π —à–∞–≥ –∫ –≤–∞—à–∏–º —Ü–µ–ª—è–º.',
    '–î–µ–≤–∞': '–ù–µ –ø–µ—Ä–µ–∂–∏–≤–∞–π—Ç–µ –∏–∑-–∑–∞ –º–µ–ª–æ—á–µ–π.',
    '–í–µ—Å—ã': '–ò—â–∏—Ç–µ –≥–∞—Ä–º–æ–Ω–∏—é –≤ —Å–≤–æ–∏—Ö –¥–µ–ª–∞—Ö.',
    '–°–∫–æ—Ä–ø–∏–æ–Ω': '–î–µ–π—Å—Ç–≤—É–π—Ç–µ —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ.',
    '–°—Ç—Ä–µ–ª–µ—Ü': '–ù–µ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ –≤–∞–∂–Ω—ã–µ –¥–µ–ª–∞ –Ω–∞ –ø–æ—Ç–æ–º.',
    '–ö–æ–∑–µ—Ä–æ–≥': '–¢–µ—Ä–ø–µ–Ω–∏–µ –∏ —É–ø–æ—Ä—Å—Ç–≤–æ –ø—Ä–∏–≤–µ–¥—É—Ç –∫ —É—Å–ø–µ—Ö—É.',
    '–í–æ–¥–æ–ª–µ–π': '–ë—É–¥—å—Ç–µ –æ—Ç–∫—Ä—ã—Ç—ã –Ω–æ–≤—ã–º –∏–¥–µ—è–º.',
    '–†—ã–±—ã': '–ü–æ–∑–≤–æ–ª—å—Ç–µ —Å–µ–±–µ –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞.'
}

@bot.message_handler(commands=['start'])
def start(message):
    markup = telebot.types.ReplyKeyboardMarkup(resize_keyboard=True)
    item1 = telebot.types.KeyboardButton("–ì–æ—Ä–æ—Å–∫–æ–ø")
    item2 = telebot.types.KeyboardButton("–¶–≤–µ—Ç –¥–Ω—è")
    item3 = telebot.types.KeyboardButton("–°–æ–≤–µ—Ç –¥–Ω—è")
    markup.add(item1, item2, item3)
    bot.send_message(message.chat.id, "–ü—Ä–∏–≤–µ—Ç! üåü –Ø —Ç–≤–æ–π –ª–∏—á–Ω—ã–π –±–æ—Ç, –≥–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Ç–µ–±–µ —Å –≥–æ—Ä–æ—Å–∫–æ–ø–æ–º, —Ü–≤–µ—Ç–æ–º –¥–Ω—è –∏–ª–∏ —Å–æ–≤–µ—Ç–æ–º. –í—ã–±–µ—Ä–∏, —á—Ç–æ —Ç–µ–±–µ –Ω—É–∂–Ω–æ!", reply_markup=markup)

# –ß–µ–ª –≤—ã–±–∏—Ä–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é 
@bot.message_handler(func=lambda message: message.text in ['–ì–æ—Ä–æ—Å–∫–æ–ø', '–¶–≤–µ—Ç –¥–Ω—è', '–°–æ–≤–µ—Ç –¥–Ω—è'])
def category_choice(message):
    # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Å–∞–º –∑–Ω–∞–∫ 
    markup = telebot.types.ReplyKeyboardMarkup(resize_keyboard=True)
    zodiac_signs = ['–û–≤–µ–Ω ‚ôàÔ∏è', '–¢–µ–ª–µ—Ü ‚ôâÔ∏è', '–ë–ª–∏–∑–Ω–µ—Ü—ã ‚ôäÔ∏è', '–†–∞–∫ ‚ôãÔ∏è', '–õ–µ–≤ ‚ôåÔ∏è', '–î–µ–≤–∞ ‚ôçÔ∏è', '–í–µ—Å—ã ‚ôéÔ∏è', '–°–∫–æ—Ä–ø–∏–æ–Ω ‚ôèÔ∏è', '–°—Ç—Ä–µ–ª–µ—Ü ‚ôêÔ∏è', '–ö–æ–∑–µ—Ä–æ–≥ ‚ôëÔ∏è', '–í–æ–¥–æ–ª–µ–π ‚ôíÔ∏è', '–†—ã–±—ã ‚ôìÔ∏è']
    for sign in zodiac_signs:
        markup.add(telebot.types.KeyboardButton(sign))
    bot.send_message(message.chat.id, "–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–π –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞, –∏ —è —Ä–∞—Å—Å–∫–∞–∂—É, —á—Ç–æ –≤–∞—Å –∂–¥—ë—Ç!", reply_markup=markup)

    # –ó–∞–ø–æ–º–∏–Ω–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ zodiac info
    bot.register_next_step_handler(message, zodiac_info)

def zodiac_info(message):
    try:
        zodiac = message.text.split(' ')[0]  # –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞
        category = message.text.split(' ')[1]  # –°—á–∏—Ç—ã–≤–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é
    except IndexError:
        # –ï—Å–ª–∏ —Ç—Ä–µ—à 
        bot.send_message(message.chat.id, "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–Ω—è—Ç—å –≤–∞—à –≤—ã–±–æ—Ä. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.")
        return

    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    if category == '–ì–æ—Ä–æ—Å–∫–æ–ø':
        response = horoscopes.get(zodiac, "–ù–µ –º–æ–≥—É –Ω–∞–π—Ç–∏ –≥–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è —ç—Ç–æ–≥–æ –∑–Ω–∞–∫–∞.")
    elif category == '–¶–≤–µ—Ç –¥–Ω—è':
        response = random.choice(colors.get(zodiac, ["–ë–µ–ª—ã–π"]))
    elif category == '–°–æ–≤–µ—Ç –¥–Ω—è':
        response = advices.get(zodiac, "–ü—Ä–æ—Å—Ç–æ –±—É–¥—å —Å–æ–±–æ–π!")
    else:
        response = "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è."

    markup = telebot.types.ReplyKeyboardMarkup(resize_keyboard=True)
    item1 = telebot.types.KeyboardButton("–ê —É –¥—Ä—É–≥–∏—Ö –∑–Ω–∞–∫–æ–≤?")
    markup.add(item1)
    bot.send_message(message.chat.id, f"{response}\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é:", reply_markup=markup)

bot.polling()